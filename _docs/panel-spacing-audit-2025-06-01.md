# Panel Spacing Audit Report
**Date:** 2025-06-01  
**Scope:** Comprehensive analysis of panel spacing across all key pages

## Executive Summary

**Critical Finding:** Multiple sources of inter-panel spacing identified, with **double panel wrapping** being the primary cause of excessive gaps. The data-driven layout system conflicts with manual panel wrappers in section includes, creating nested panel structures with accumulated padding.

**Primary Issues:**
1. **Double Panel Wrapping**: Impact sections and some hero sections manually wrap themselves in panels while also being auto-wrapped by the data-driven system
2. **CSS Rule Conflicts**: Current spacing fixes target wrong selectors 
3. **Inconsistent Implementation**: Mixed manual and data-driven approaches across pages

**Impact:** Pages show 48-64px gaps between panels instead of seamless flow, degrading visual cohesion and user experience.

## Detailed Analysis Table

| Page | Layout System | Panel Creation | Hero Wrapping | Impact Wrapping | Gap Source | Gap Size (est.) | Status |
|------|---------------|----------------|---------------|-----------------|------------|-----------------|---------|
| **Home** | Data-driven | Auto via helpers | ‚úÖ Content only | ‚ùå Manual + Auto | Double wrapping | ~64px | üî¥ **BROKEN** |
| **Brands** | Data-driven | Auto via helpers | ‚úÖ Content only | ‚úÖ Content only | Base panel padding | ~48px | üü° **PARTIAL** |
| **Founders** | Data-driven | Auto via helpers | ‚úÖ Content only | ‚ùå Manual + Auto | Double wrapping | ~64px | üî¥ **BROKEN** |
| **Discovery** | Data-driven | Auto via helpers | ‚úÖ Content only | ‚úÖ Content only | Base panel padding | ~48px | üü° **PARTIAL** |
| **Insights** | Data-driven | Auto via helpers | ‚úÖ Content only | ‚ùå Manual + Auto | Double wrapping | ~64px | üî¥ **BROKEN** |
| **Journal** | Data-driven | Auto via helpers | ‚úÖ Content only | *No impact section* | Base panel padding | ~48px | üü° **PARTIAL** |
| **About** | Manual | Manual includes | ‚úÖ Manual wrapping | ‚úÖ Manual wrapping | None | 0px | ‚úÖ **WORKING** |

## Panel Structure Analysis

### Data-Driven System Structure
```html
<!-- Generated by helpers/page-sections.html -->
<section class="{page}-section {page}-section--{section}">
  <!-- Generated by helpers/panel-wrapper.html -->
  <div class="panel panel--{type}">
    <div class="panel__content">
      <!-- Section include content -->
      {% include pages/{page}/{section}.html %}
    </div>
  </div>
</section>
```

### Manual System Structure (About Page)
```html
<!-- Direct include without data-driven wrapper -->
<section class="about-section about-section--{section}">
  {% include pages/about/{section}.html %}
  <!-- Section includes its own panel wrapper -->
</section>
```

### Double Wrapping Problem
```html
<!-- BROKEN: Double panel wrapping -->
<section class="home-section home-section--impact-statement">
  <div class="panel panel--primary">  <!-- Auto-generated wrapper -->
    <div class="panel__content">      <!-- Auto-generated content wrapper -->
      <div class="panel panel--primary panel--impact">  <!-- Manual wrapper in include -->
        <div class="panel__content">                    <!-- Manual content wrapper -->
          <!-- Actual content -->
        </div>
      </div>
    </div>
  </div>
</section>
```

## CSS Analysis

### Base Panel Padding (Root Cause)
```scss
.panel {
  padding: var(--space-8) 0;   /* 32px top/bottom on mobile */
  @media (width >= 768px) {
    padding: var(--space-12) 0;  /* 48px top/bottom on tablet+ */
  }
  @media (width >= 1200px) {
    padding: var(--space-16) 0;  /* 64px top/bottom on desktop */
  }
}
```

### Current Spacing Fix (Ineffective)
```scss
/* Target only the gap between panels, not content padding */
.home-page,
.brands-page, 
.founders-page,
.discovery-page,
.insights-page,
.journal-page {
  
  /* Remove spacing between consecutive panels only */
  .panel--hero + section .panel--light {
    padding-top: 0;  /* ‚ùå Wrong selector - doesn't match actual structure */
  }
  
  .panel--light + section .panel--light {
    padding-top: 0;  /* ‚ùå Wrong selector - doesn't match actual structure */
  }
  
  /* Keep content padding intact */
  .panel__content {
    padding: var(--space-8) var(--space-6);  /* ‚ùå Conflicts with responsive rules */
  }
}
```

### Actual DOM Structure
The current CSS targets `.panel--hero + section .panel--light` but the actual structure is:
```html
<section>  <!-- No panel class here -->
  <div class="panel panel--hero">...</div>
</section>
<section>  <!-- No panel class here -->
  <div class="panel panel--light">...</div>
</section>
```

## Files Requiring Changes

### Manual Panel Wrappers to Remove
1. `_includes/pages/home/impact-statement.html` - Remove `<div class="panel panel--primary panel--impact">`
2. `_includes/pages/founders/impact.html` - Remove `<div class="panel panel--primary panel--impact">`
3. `_includes/pages/insights/impact.html` - Remove `<div class="panel panel--primary panel--impact">`

### CSS Files to Update
- `assets/css/layout/panels.scss` - Replace current spacing fix with correct selectors

## Recommended Solutions

### Phase 1: Remove Double Wrapping (Immediate)
Remove manual panel wrappers from impact sections that use the data-driven system:

```liquid
<!-- BEFORE (in impact includes) -->
<div class="panel panel--primary panel--impact">
  <div class="panel__content">
    <h2 class="panel__heading-secondary">{{ t.title }}</h2>
    <p class="panel__lead-text">{{ t.text }}</p>
  </div>
</div>

<!-- AFTER (content only) -->
<h2 class="panel__heading-secondary">{{ t.title }}</h2>
<p class="panel__lead-text">{{ t.text }}</p>
```

### Phase 2: Correct CSS Selectors
Replace current spacing fix with properly targeted selectors:

```scss
/* Remove inter-panel spacing in data-driven layouts */
.home-page,
.brands-page,
.founders-page,
.discovery-page,
.insights-page,
.journal-page {
  
  /* Target actual section structure */
  section + section {
    .panel {
      padding-top: 0;
    }
  }
  
  /* Maintain hero spacing for visual hierarchy */
  section:has(.panel--hero) + section {
    .panel {
      padding-top: var(--space-8);
      
      @media (width >= 768px) {
        padding-top: var(--space-12);
      }
    }
  }
}
```

### Phase 3: Standardize Panel Implementation
**Option A:** Convert About page to data-driven system for consistency  
**Option B:** Document and maintain both systems with clear usage guidelines

## Priority Implementation Order

1. **HIGH:** Remove double wrapping from impact sections (immediate visual improvement)
2. **HIGH:** Update CSS selectors to target correct DOM structure
3. **MEDIUM:** Test across all responsive breakpoints
4. **LOW:** Consider standardizing About page implementation

## Testing Requirements

After implementation, verify:
- [ ] Seamless panel flow on all data-driven pages
- [ ] Proper content padding maintained
- [ ] Hero sections maintain appropriate spacing
- [ ] About page continues to work correctly
- [ ] Responsive behavior preserved across all breakpoints

---

**Next Steps:** Implement Phase 1 fixes immediately to eliminate double wrapping, then proceed with CSS selector corrections.