# Taxonomy Tag Migration Guide

## Overview
Migration from deprecated `components/helpers/taxonomy-tag.html` to standard `helpers/dimension-name.html` approach.

## Why This Change?
- **Consistent Title Case formatting** across site ("Founder-led" vs "founder-led")
- **Better multilingual support** through direct JSON data access
- **Aligns with project standards** used in Case Studies and modern components
- **Improved performance** by reducing helper layer indirection

## Migration Pattern

### **Before (Deprecated):**
```liquid
{% include components/helpers/taxonomy-tag.html
   type="sector"
   value=sector
   class_name="brand-card" %}
```

### **After (Standard):**
```liquid
<a href="{{ site.baseurl }}/{{ page.lang }}/discover/sectors/{{ sector }}/" 
   class="brand-card__tag brand-card__tag--sector">
  {% include helpers/dimension-name.html type="sectors" id=sector %}
</a>
```

## Key Changes

### **Parameter Mapping:**
- `type="sector"` → `type="sectors"` (plural form)
- `value=X` → `id=X` 
- `class_name="component"` → Manual CSS class in `<a>` tag

### **URL Structure:**
- URLs remain the same: `/discover/sectors/wine/`
- Links are manually constructed instead of generated by component

### **CSS Classes:**
- `component__tag` (base class)
- `component__tag--sector` (type-specific class)
- Replace "component" with your component name (e.g., `brand-card__tag`)

## Type-Specific Examples

### **Markets:**
```liquid
<!-- OLD -->
{% include components/helpers/taxonomy-tag.html type="market" value=market class_name="card" %}

<!-- NEW -->
<a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ market }}/" 
   class="card__tag card__tag--market">
  {% include helpers/dimension-name.html type="markets" id=market %}
</a>
```

### **Sectors:**
```liquid
<!-- OLD -->
{% include components/helpers/taxonomy-tag.html type="sector" value=sector class_name="card" %}

<!-- NEW -->
<a href="{{ site.baseurl }}/{{ page.lang }}/discover/sectors/{{ sector }}/" 
   class="card__tag card__tag--sector">
  {% include helpers/dimension-name.html type="sectors" id=sector %}
</a>
```

### **Attributes:**
```liquid
<!-- OLD -->
{% include components/helpers/taxonomy-tag.html type="attribute" value=attribute class_name="card" %}

<!-- NEW -->
<a href="{{ site.baseurl }}/{{ page.lang }}/discover/attributes/{{ attribute }}/" 
   class="card__tag card__tag--attribute">
  {% include helpers/dimension-name.html type="attributes" id=attribute %}
</a>
```

### **Signals:**
```liquid
<!-- OLD -->
{% include components/helpers/taxonomy-tag.html type="signal" value=signal class_name="card" %}

<!-- NEW -->
<a href="{{ site.baseurl }}/{{ page.lang }}/discover/signals/{{ signal }}/" 
   class="card__tag card__tag--signal">
  {% include helpers/dimension-name.html type="signals" id=signal %}
</a>
```

## Testing Checklist

After migration, verify:

### **Visual Verification:**
- [ ] Tags display with proper Title Case formatting
- [ ] Tags maintain existing styling and colors
- [ ] Hover effects work correctly
- [ ] Links navigate to correct dimension pages

### **Multilingual Verification:**
- [ ] English version shows English labels
- [ ] Russian version shows Cyrillic labels  
- [ ] Chinese version shows Chinese characters
- [ ] All languages link to correct language-specific pages

### **Functional Verification:**
- [ ] All taxonomy types display correctly (markets, sectors, attributes, signals)
- [ ] Limits still work (e.g., displaying only 1-2 tags per type)
- [ ] No JavaScript errors in browser console
- [ ] Page loads without Jekyll build errors

## Components Requiring Migration

### **High Priority (User-facing):**
1. `_includes/components/cards/brand-card.html` (4 uses)
2. `_includes/components/cards/featured-brand-card.html` (4 uses)  
3. `_includes/components/cards/related-brand-card.html` (1 use)

### **Medium Priority (Comprehensive display):**
4. `_includes/components/taxonomy/display.html` (8 uses)

### **Low Priority (Development/Testing):**
5. Test pages in `pages/*/dev/` (15 uses)

## Migration Schedule

- **Phase 1**: High priority components (brand cards)
- **Phase 2**: Medium priority components (taxonomy display)
- **Phase 3**: Clean up test pages and documentation
- **Phase 4**: Remove deprecated component (after 3-week buffer)

## Rollback Plan

If issues arise during migration:

1. **Immediate**: Revert specific component to use deprecated helper
2. **Documentation**: Log issue in migration tracking document
3. **Investigation**: Debug root cause of formatting/display issue
4. **Resolution**: Fix and re-migrate with additional testing

## Support

For migration questions or issues:
- Review this guide thoroughly
- Check `helpers/dimension-name.html` documentation
- Test changes in development environment first
- Verify all three language versions (EN/RU/ZH)

---

**Migration Start Date**: 2025-06-25  
**Target Completion**: 2025-07-10  
**Deprecated Component Removal**: 2025-07-15