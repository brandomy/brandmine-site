{% comment %}
  Include Name: components/images/site-image.html

  Purpose: Generates responsive image HTML for general site images (non-brand specific)
  with proper srcset and sizes attributes for optimal loading performance.

  Parameters:
  - category: Image category path (required, e.g., "people/testimonials", "markets", "sectors")
  - purpose: Image purpose identifier (required, e.g., "hero", "headshot", "background")
  - image: Image identifier (required, e.g., "georgie-yam", "moscow-kremlin")
  - alt: Alt text for the image (required for accessibility)
  - class: Additional CSS classes for the img tag (optional)
  - sizes: Custom sizes attribute for responsive loading (optional, default provided)
  - widths: Comma-separated list of image widths to use (optional, default: "400,800,1200")
  - ext: File extension (optional, default: "jpg")

  Dependencies:
  - Site images must be pre-processed with _scripts/process_site_images.sh
  - Proper directory structure in /assets/images/{category}/
  - File naming convention: {purpose}-{image}-{width}w.{ext}

  Example Usage:
  Testimonial headshot:
  {% include components/images/site-image.html
     category="people/testimonials"
     purpose="headshot"
     image="georgie-yam"
     alt="Georgie Yam founder photo"
     class="testimonial-photo"
     ext="png" %}

  Market feature image:
  {% include components/images/site-image.html
     category="markets"
     purpose="feature"
     image="moscow-kremlin"
     alt="Moscow Kremlin" %}

  Notes:
  - Automatically constructs proper image paths based on category, purpose, and image info
  - Includes srcset for responsive image loading (400w, 800w, 1200w variants)
  - Uses lazy loading for better performance
  - Follows Brandmine's image processing and naming conventions
  - Supports both JPG and PNG formats via the ext parameter
{% endcomment %}

{% assign category = include.category %}
{% assign purpose = include.purpose %}
{% assign image = include.image %}
{% assign alt = include.alt %}
{% assign class = include.class %}
{% assign ext = include.ext | default: "jpg" %}
{% assign sizes = include.sizes | default: "(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px" %}
{% assign widths = include.widths | default: "400,800,1200" %}
{% assign widths_array = widths | split: "," %}
{% assign base_path = "/assets/images/" | append: category | append: "/" %}

<img src="{{ base_path | append: purpose | append: "-" | append: image | append: "-" | append: widths_array[0] | append: "w." | append: ext | relative_url }}"
     srcset="{% for width in widths_array %}{{ base_path | append: purpose | append: "-" | append: image | append: "-" | append: width | append: "w." | append: ext | relative_url }} {{ width }}w{% unless forloop.last %}, {% endunless %}{% endfor %}"
     sizes="{{ sizes }}"
     alt="{{ alt }}"
     {% if class %}class="{{ class }}"{% endif %}
     loading="lazy">
