{% comment %}
  Component: components/helpers/brand-image.html

  Purpose: Displays responsive brand-related images with appropriate srcset and fallbacks

  Parameters:
    - brand: Brand object (required)
    - type: Image type - "logo", "hero", "founder", etc. (required)
    - class_name: CSS class prefix for styling (optional, defaults to "brand-card")
    - sizes: Media query sizes attribute (optional, has defaults for each type)
    - fallback_icon: Icon to show if image is missing (optional, defaults by type)

  Dependencies:
    - None
{% endcomment %}

{% assign base_path = site.baseurl | append: "/assets/images/brands/" | append: brand.ref %}

{% case include.type %}
  {% when "logo" %}
    {% assign base_filename = "/logo-color" %}
    {% assign default_sizes = "(max-width: 600px) 72px, 120px" %}
    {% assign default_class = "logo-img" %}
    {% assign fallback_icon = include.fallback_icon | default: brand.title | slice: 0, 1 | upcase %}
    {% assign image_format = "png" %}

  {% when "hero" %}
    {% assign base_filename = "/hero-main" %}
    {% assign default_sizes = "(max-width: 600px) 133px, (max-width: 900px) 266px, 400px" %}
    {% assign default_class = "img" %}
    {% assign fallback_icon = include.fallback_icon | default: "üèôÔ∏è" %}
    {% assign image_format = "jpg" %}

  {% when "founder" %}
    {% assign base_filename = "/founder-portrait" %}
    {% assign default_sizes = "(max-width: 600px) 80px, 120px" %}
    {% assign default_class = "founder-img" %}
    {% assign fallback_icon = include.fallback_icon | default: "üë§" %}
    {% assign image_format = "jpg" %}

  {% else %}
    {% assign base_filename = "/" | append: include.type %}
    {% assign default_sizes = "(max-width: 600px) 133px, 266px" %}
    {% assign default_class = "img" %}
    {% assign fallback_icon = include.fallback_icon | default: "üì∑" %}
    {% assign image_format = include.format | default: "jpg" %}
{% endcase %}

{% assign sizes = include.sizes | default: default_sizes %}
{% assign class_prefix = include.class_name | default: "brand-card" %}
{% assign class_suffix = include.class_suffix | default: default_class %}

{% if brand.ref %}
  <img src="{{ base_path }}{{ base_filename }}-800w.{{ image_format }}"
       srcset="{{ base_path }}{{ base_filename }}-400w.{{ image_format }} 400w,
               {{ base_path }}{{ base_filename }}-800w.{{ image_format }} 800w,
               {{ base_path }}{{ base_filename }}-1200w.{{ image_format }} 1200w"
       sizes="{{ sizes }}"
       alt="{{ include.alt | default: brand.title }}"
       class="{{ class_prefix }}__{{ class_suffix }}">
{% else %}
  <div class="{{ class_prefix }}__{{ include.type }}-placeholder">
    <div class="{{ class_prefix }}__{{ include.type }}-placeholder-icon">{{ fallback_icon }}</div>
  </div>
{% endif %}
