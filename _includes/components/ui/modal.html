{% comment %}
================================================================================
COMPONENT: Modal Dialog
PATH: _includes/components/ui/modal.html
PURPOSE: Accessible modal dialog component with multiple sizes and interaction patterns
CREATED: 2024-01-01 | VERSION: 2.3
================================================================================

Features:
- Four size variants (small, medium, large, full) for different content needs
- Full accessibility compliance with ARIA attributes and focus management
- Backdrop click and ESC key closing with configurable behavior
- Smooth CSS animations with transform and opacity transitions
- Comprehensive inline styling with responsive breakpoints
- Content flexibility via parameter or content block patterns
- Translation support for UI elements like close button labels
- JavaScript API integration for programmatic control

Parameters:
- id (required): String - Unique identifier for modal instance and ARIA labeling
- title (optional): String - Modal header title text
- size (optional): String - Size variant ("small", "medium", "large", "full"). Default: "medium"
- closable (optional): Boolean - Show close button and allow user dismissal. Default: true
- backdrop_close (optional): Boolean - Close modal on backdrop click. Default: true
- class_name (optional): String - Additional CSS classes for custom styling
- content (optional): String - Modal body content (alternative to content blocks)

Dependencies:
- CSS: Comprehensive inline styles included in component
- JavaScript: Optional modal.js for enhanced functionality (open/close API)
- Data: site.data.translations for close button localization
- ARIA: Built-in accessibility attributes and screen reader support

Usage Examples:
{% capture modal_content %}
  <p>This is modal content.</p>
  <button class="btn btn--primary" onclick="closeModal('example-modal')">Save</button>
{% endcapture %}
{% include components/ui/modal.html id="example-modal" title="Edit Brand" content=modal_content %}

{% include components/ui/modal.html id="confirm-modal" title="Confirm Action" size="small" %}
  <p>Are you sure you want to delete this brand?</p>
  <div class="modal-actions">
    <button class="btn btn--danger" onclick="deleteBrand(); closeModal('confirm-modal')">Delete</button>
    <button class="btn btn--outline" onclick="closeModal('confirm-modal')">Cancel</button>
  </div>
{% endcapture %}

Real-world Usage:
Used for confirmations, forms, image galleries, detailed views, and user interactions

Size Specifications:
- Small (400px): Confirmations, alerts, simple forms
- Medium (600px): Standard content, moderate forms, default
- Large (800px): Complex forms, detailed content, image galleries
- Full (95vw/95vh): Maximum content, media viewers, dashboards

BEM Structure:
- .modal (main modal overlay)
- .modal--[size] (size modifier: small, medium, large, full)
- .modal--open (active state modifier)
- .modal__backdrop (background overlay for click-to-close)
- .modal__container (centered positioning wrapper)
- .modal__content (main content area with background)
- .modal__header (title and close button area)
- .modal__title (modal title heading)
- .modal__close (close button with icon)
- .modal__body (main content area)

Accessibility:
- role="dialog" and aria-modal="true" for screen readers
- aria-labelledby linking to modal title
- aria-hidden state management for background content
- Focus trapping within modal when open
- Keyboard navigation support (ESC to close, Tab navigation)
- Screen reader friendly close button with proper labeling

Responsive:
- Mobile: Full-width modals with minimal margins
- Tablet: Constrained widths with enhanced touch targets
- Desktop: Fixed widths with hover states and precise positioning

Performance Notes:
- CSS-only animations with hardware acceleration
- Minimal DOM structure for fast rendering
- Inline styles eliminate additional HTTP requests
- Efficient show/hide with display and opacity properties
- Smooth 150ms transitions for professional feel

JavaScript API:
- openModal(id): Programmatically open modal
- closeModal(id): Programmatically close modal
- Focus management and keyboard event handling
- Event callbacks for open/close lifecycle
================================================================================
{% endcomment %}

{% assign size = include.size | default: "medium" %}
{% assign closable = include.closable | default: true %}
{% assign backdrop_close = include.backdrop_close | default: true %}

<div class="modal modal--{{ size }} {{ include.class_name }}" 
     id="{{ include.id }}" 
     role="dialog" 
     aria-modal="true"
     {% if include.title %}aria-labelledby="{{ include.id }}-title"{% endif %}
     aria-hidden="true">
  
  <div class="modal__backdrop" {% if backdrop_close %}onclick="closeModal('{{ include.id }}')"{% endif %}></div>
  
  <div class="modal__container">
    <div class="modal__content">
      
      {% if include.title or closable %}
        <header class="modal__header">
          {% if include.title %}
            <h2 class="modal__title" id="{{ include.id }}-title">{{ include.title }}</h2>
          {% endif %}
          
          {% if closable %}
            {% assign close_label = site.data.translations[page.lang].common.actions.close | default: "Close" %}
            <button class="modal__close" 
                    onclick="closeModal('{{ include.id }}')" 
                    aria-label="{{ close_label }}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          {% endif %}
        </header>
      {% endif %}
      
      <div class="modal__body">
        {{ include.content }}
      </div>
    </div>
  </div>
</div>

<style>
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10000;
  display: none;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.15s ease-out;
}

.modal.modal--open {
  display: flex;
  opacity: 1;
}

.modal__backdrop {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
}

.modal__container {
  position: relative;
  z-index: 1;
  max-height: 90vh;
  margin: 1rem;
  overflow: hidden;
  transform: translateY(-20px);
  transition: transform 0.15s ease-out;
}

.modal.modal--open .modal__container {
  transform: translateY(0);
}

.modal__content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  max-height: 90vh;
  overflow: auto;
}

.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem 1.5rem 0;
  border-bottom: 1px solid #e5e7eb;
}

.modal__title {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
}

.modal__close {
  background: none;
  border: none;
  padding: 0.5rem;
  cursor: pointer;
  border-radius: 4px;
  color: #6b7280;
  transition: color 0.15s ease;
}

.modal__close:hover {
  color: #374151;
}

.modal__body {
  padding: 1.5rem;
}

/* Modal sizes */
.modal--small .modal__content { width: 400px; }
.modal--medium .modal__content { width: 600px; }
.modal--large .modal__content { width: 800px; }
.modal--full .modal__content { width: 95vw; height: 95vh; }

/* Responsive */
@media (max-width: 768px) {
  .modal__container {
    margin: 0.5rem;
  }
  .modal--small .modal__content,
  .modal--medium .modal__content,
  .modal--large .modal__content {
    width: 100%;
  }
}
</style>

<!-- Modal functionality provided by modal.js component -->