{% comment %}
  Include Name: components/brands/related-brands-list.html

  Purpose: Displays a list of related brands with logo, title, sector, and description.
  Used on brand detail pages, tag pages, and other contexts to show related brands.

  Parameters:
  - brands: Array of brand slugs to display (required)

  Dependencies:
  - site.brands collection with valid brand objects
  - CSS: related-brands-list.css
  - Data: site.data.translations[lang].brand.no_related_brands for empty state

  Example Usage:
  {% include components/brands/related-brands-list.html brands=page.related_brands %}
  {% include components/brands/related-brands-list.html brands=tag.brands %}

  Notes:
  - Automatically filters brands to match the current page language
  - Displays brand logo, title, primary sector, and truncated description
  - Includes fallback message when no related brands are available
  - Links to each brand's detail page
  - Truncates descriptions to 80 characters
  - Uses BEM naming conventions for styling
{% endcomment %}

{% if include.brands and include.brands.size > 0 %}
<div class="related-brands">
  {% for brand_slug in include.brands %}
    {% assign brand = site.brands | where: "slug", brand_slug | where: "lang", page.lang | first %}
    {% if brand %}
    <div class="related-brands__item">
      {% if brand.logo %}
      <div class="related-brands__logo">
        <img src="{{ brand.logo | relative_url }}" alt="{{ brand.title }} logo" class="img-fluid">
      </div>
      {% endif %}
      <div class="related-brands__info">
        <h4><a href="{{ brand.url | relative_url }}">{{ brand.title }}</a></h4>
        {% if brand.sectors and brand.sectors.size > 0 %}
        <span class="related-brands__sector">{{ brand.sectors[0] }}</span>
        {% endif %}
        <p class="related-brands__description">{{ brand.description | truncate: 80 }}</p>
      </div>
    </div>
    {% endif %}
  {% endfor %}
</div>
{% else %}
<p class="related-brands__none">{{ site.data.translations[page.lang].brand.no_related_brands }}</p>
{% endif %}
