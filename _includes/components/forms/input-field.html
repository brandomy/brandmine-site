{% comment %}
================================================================================
COMPONENT: Input Field
PATH: _includes/components/forms/input-field.html
PURPOSE: Accessible form input component with comprehensive validation and state management
CREATED: 2024-01-01 | VERSION: 2.1
================================================================================

Features:
- Comprehensive input type support including text, email, password, tel, url, number
- Built-in accessibility with ARIA attributes and semantic markup structure
- Visual validation states with error icons and help text integration
- Required field indication with asterisk and screen reader announcements
- Auto-generated field IDs with collision prevention for multiple forms
- Pattern validation support for custom input format requirements
- Character length limits with browser-native validation integration
- Autocomplete attribute support for improved user experience

Parameters:
- name (required): String - HTML name attribute for form submission
- type (optional): String - Input type: "text", "email", "password", "tel", "url", "number". Default: "text"
- id (optional): String - HTML id attribute, auto-generated from name if not provided
- label (optional): String - Field label text with automatic required indicator
- placeholder (optional): String - Placeholder text for empty field guidance
- value (optional): String - Default field value for form pre-population
- required (optional): Boolean - Required field validation. Default: false
- disabled (optional): Boolean - Disabled state preventing user interaction. Default: false
- readonly (optional): Boolean - Readonly state allowing view but no edit. Default: false
- autocomplete (optional): String - Browser autocomplete hint (e.g., "email", "given-name")
- pattern (optional): String - Regex validation pattern for custom formats
- min (optional): String/Number - Minimum value for number/date inputs
- max (optional): String/Number - Maximum value for number/date inputs
- minlength (optional): Integer - Minimum character length requirement
- maxlength (optional): Integer - Maximum character length limit
- help_text (optional): String - Descriptive help text below field
- error_message (optional): String - Error message for validation failure state
- class_name (optional): String - Additional CSS classes for custom styling

Dependencies:
- CSS: assets/css/components/forms/input-field.scss for styling and states
- Icons: Inline SVG error icon with accessibility attributes
- Browser: Native HTML5 validation features and ARIA support

Input Type Support:
- text: Standard text input with pattern validation support
- email: Email validation with browser-native format checking
- password: Password field with secure input masking
- tel: Telephone number input with international format support
- url: URL validation with protocol requirement checking
- number: Numeric input with min/max range validation

Usage Examples:
Basic text input:
{% raw %}{% include components/forms/input-field.html name="username" label="Username" required=true %}{% endraw %}

Email with validation:
{% raw %}{% include components/forms/input-field.html
   name="email"
   type="email"
   label="Email Address"
   required=true
   autocomplete="email"
   help_text="We'll never share your email address" %}{% endraw %}

Password with requirements:
{% raw %}{% include components/forms/input-field.html
   name="password"
   type="password"
   label="Password"
   required=true
   minlength=8
   pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}"
   help_text="Must contain uppercase, lowercase, and number" %}{% endraw %}

Phone number input:
{% raw %}{% include components/forms/input-field.html
   name="phone"
   type="tel"
   label="Phone Number"
   autocomplete="tel"
   placeholder="+1 (555) 123-4567" %}{% endraw %}

URL input with validation:
{% raw %}{% include components/forms/input-field.html
   name="website"
   type="url"
   label="Website URL"
   placeholder="https://example.com"
   pattern="https://.*" %}{% endraw %}

Real-world Applications:
- Contact forms with email and phone validation
- User registration with password requirements
- Brand submission forms with website URL validation
- Profile editing with autocomplete optimization
- Business inquiry forms with structured data collection

BEM Structure:
- .form-field (main field container with state modifiers)
- .form-field--error (error state modifier for validation feedback)
- .form-field__label (field label with required indicator)
- .form-field__required (required asterisk with screen reader text)
- .form-field__input-wrapper (input container for styling and icons)
- .form-field__input (actual input element with validation states)
- .form-field__help (help text with ARIA association)
- .form-field__error (error message with alert role and icon)

Accessibility:
- Semantic HTML structure with proper label-input associations
- ARIA attributes for required fields, validation states, and help text
- Screen reader announcements for error states with role="alert"
- High contrast error states meeting WCAG AA color requirements
- Keyboard navigation support with proper focus management
- Required field indication with both visual and screen reader cues

Responsive Design:
- Mobile (320px+): Touch-friendly input sizing with optimized keyboard types
- Tablet (768px+): Enhanced spacing and visual hierarchy
- Desktop (1024px+): Hover states and refined interaction feedback
- Consistent field heights and alignment across all device sizes

Validation Integration:
- Browser-native HTML5 validation with custom pattern support
- Visual error states with immediate feedback on field blur
- Error message display with descriptive text and icon indicators
- Help text integration for proactive guidance and requirement explanation
- Character counting display for fields with length limits

State Management:
- Default state with clean, professional appearance
- Focus state with enhanced border and visual feedback
- Error state with red border, icon, and message display
- Disabled state with reduced opacity and interaction prevention
- Readonly state with visual distinction from editable fields

Performance Optimization:
- Minimal DOM structure with efficient CSS selector targeting
- Inline SVG icons to reduce HTTP requests and improve loading
- CSS-only state management without JavaScript dependencies
- Optimized field ID generation preventing naming conflicts

Error Handling:
- Graceful degradation when JavaScript unavailable
- Fallback styling for unsupported input types
- Default values ensuring form functionality in all browsers
- Clean error message display even with missing parameters
================================================================================
{% endcomment %}

{% assign field_id = include.id | default: include.name %}
{% assign field_required = include.required | default: false %}
{% assign field_disabled = include.disabled | default: false %}
{% assign field_readonly = include.readonly | default: false %}
{% assign input_type = include.type | default: "text" %}

<div class="form-field {{ include.class_name }} {% if include.error_message %}form-field--error{% endif %}">
  
  {% if include.label %}
    <label for="{{ field_id }}" class="form-field__label">
      {{ include.label }}
      {% if field_required %}
        <span class="form-field__required" aria-label="required">*</span>
      {% endif %}
    </label>
  {% endif %}

  <div class="form-field__input-wrapper">
    <input type="{{ input_type }}"
           id="{{ field_id }}"
           name="{{ include.name }}"
           class="form-field__input"
           {% if include.placeholder %}placeholder="{{ include.placeholder }}"{% endif %}
           {% if include.value %}value="{{ include.value }}"{% endif %}
           {% if field_required %}required aria-required="true"{% endif %}
           {% if field_disabled %}disabled{% endif %}
           {% if field_readonly %}readonly{% endif %}
           {% if include.autocomplete %}autocomplete="{{ include.autocomplete }}"{% endif %}
           {% if include.pattern %}pattern="{{ include.pattern }}"{% endif %}
           {% if include.min %}min="{{ include.min }}"{% endif %}
           {% if include.max %}max="{{ include.max }}"{% endif %}
           {% if include.minlength %}minlength="{{ include.minlength }}"{% endif %}
           {% if include.maxlength %}maxlength="{{ include.maxlength }}"{% endif %}
           {% if include.help_text %}aria-describedby="{{ field_id }}-help"{% endif %}
           {% if include.error_message %}aria-invalid="true" aria-describedby="{{ field_id }}-error"{% endif %}>
  </div>

  {% if include.help_text %}
    <div class="form-field__help" id="{{ field_id }}-help">
      {{ include.help_text }}
    </div>
  {% endif %}

  {% if include.error_message %}
    <div class="form-field__error" id="{{ field_id }}-error" role="alert">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
      {{ include.error_message }}
    </div>
  {% endif %}
</div>