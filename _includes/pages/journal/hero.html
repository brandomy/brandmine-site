{% comment %}
  Component: pages/journal/hero.html
  Purpose: Split hero section for both journal landing page and individual posts
  Parameters:
    - title: The title to display in the hero section (default from translations or post.title)
    - subtitle: The subtitle to display in the hero section (default from translations or post.excerpt)
    - color_scheme: Color scheme for the background (teal, blue, orange, purple, green, slate)
    - hero_image: Path to the hero image (optional)
    - hero_alt: Alt text for the hero image
    - post: Post object for individual post pages
    - type: "landing" or "post" (auto-detected)
  Dependencies:
    - assets/css/pages/journal/hero.scss
{% endcomment %}

{% assign t = site.data.translations[page.lang].journal %}
{% assign post = include.post | default: page %}

{% comment %} Determine if this is a landing page or post page {% endcomment %}
{% if post.layout == 'post' %}
  {% assign hero_type = 'post' %}
  {% assign hero_title = post.title %}
  {% assign hero_subtitle = post.excerpt %}
  {% assign hero_image = post.image | default: '/assets/images/placeholders/insight-hero-1200w.jpg' %}
  {% assign hero_alt = post.image_caption | default: post.title %}
{% else %}
  {% assign hero_type = 'landing' %}
  {% assign hero_title = include.title | default: t.hero_title %}
  {% assign hero_subtitle = include.subtitle | default: t.hero_subtitle %}
  {% assign hero_image = include.hero_image | default: '/assets/images/placeholders/insight-hero-1200w.jpg' %}
  {% assign hero_alt = include.hero_alt | default: hero_title %}
{% endif %}

{% if hero_type == 'post' %}
  {% assign color_scheme = post.color_scheme | default: include.color_scheme | default: 'teal' %}
{% else %}
  {% assign color_scheme = include.color_scheme | default: 'teal' %}
{% endif %}

<div class="panel panel--hero">
  <div class="panel__content">
    <div class="journal-hero journal-hero--{{ color_scheme }} journal-hero--{{ hero_type }}">
      <!-- Text Content Section -->
      <div class="journal-hero__content">
        {% if hero_type == 'post' %}
          <!-- Post-specific content with meta -->
          <div class="post-hero__meta">
            <time class="post-hero__date" datetime="{{ post.date | date_to_xmlschema }}">
              {{ post.date | date: "%B %d, %Y" }}
            </time>
            {% if post.author %}
              <span class="separator">•</span>
              <span class="post-hero__author">
                {% assign author_data = site.data.translations[page.lang].authors[post.author] %}
                {{ author_data | default: post.author }}
              </span>
            {% endif %}
            {% if post.reading_time %}
              <span class="separator">•</span>
              <span class="post-hero__reading-time">
                {{ post.reading_time }} {{ t.min_read | default: "min read" }}
              </span>
            {% endif %}
          </div>
          
          <h1 class="journal-hero__title">{{ hero_title }}</h1>
          
          {% if post.excerpt %}
            <p class="journal-hero__subtitle">{{ hero_subtitle }}</p>
          {% endif %}
          
          {% if post.tags and post.tags.size > 0 %}
            <div class="post-hero__tags">
              {% for tag in post.tags limit: 4 %}
                <a href="{{ '/search/' | prepend: '/' | append: page.lang | append: '/' | relative_url }}?tag={{ tag | slugify }}" class="post-hero__tag">
                  {{ tag }}
                </a>
              {% endfor %}
            </div>
          {% endif %}
        {% else %}
          <!-- Landing page content -->
          <h1 class="journal-hero__title">{{ hero_title }}</h1>
          <p class="journal-hero__subtitle">{{ hero_subtitle }}</p>
        {% endif %}
      </div>
      
      <!-- Image Section -->
      <div class="journal-hero__image">
        {% if hero_image %}
          {% include components/images/base-image.html
             src=hero_image
             alt=hero_alt
             sizes="(max-width: 767px) 100vw, 50vw"
             loading="eager"
             class="journal-hero__img"
          %}
        {% endif %}
      </div>
    </div>
  </div>
</div>