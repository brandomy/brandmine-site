{% comment %}
  Page Section: pages/founders/all-founders.html

  Purpose: Comprehensive founder directory with list format display and filtering

  Section Type: Content Directory
  Template: founders.html

  Parameters:
    items_per_page (optional): Number of founders per page (default: 30)
    show_filters (optional): Show dimension filtering (default: true)
    premium_teaser (optional): Show premium access message (default: true)
{% endcomment %}

{% assign current_lang = page.lang | default: 'en' %}
{% assign items_per_page = include.items_per_page | default: 30 %}
{% assign show_filters = include.show_filters | default: true %}
{% assign premium_teaser = include.premium_teaser | default: true %}

<div class="all-founders">
  <div class="all-founders__header">
    <h2 class="all-founders__title">
      {% include helpers/t.html key="founders.all_founders.title" fallback="All Founders Directory" lang=current_lang %}
    </h2>
    <p class="all-founders__description">
      {% include helpers/t.html key="founders.all_founders.description" fallback="Meet the visionary entrepreneurs building exceptional brands across BRICS+ markets." lang=current_lang %}
    </p>
  </div>

  {% if show_filters %}
    <div class="all-founders__filters">
      <div class="all-founders__filter-row">
        <!-- Markets Filter -->
        <div class="all-founders__filter-group">
          <label class="all-founders__filter-label">Market</label>
          <select class="all-founders__filter-select" data-filter="markets">
            <option value="">All Markets</option>
            {% assign markets = site.dimensions | where: "lang", current_lang | where: "type", "markets" | sort: "title" %}
            {% for market in markets %}
              <option value="{{ market.slug }}">{{ market.title }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Expertise Filter -->
        <div class="all-founders__filter-group">
          <label class="all-founders__filter-label">Expertise</label>
          <select class="all-founders__filter-select" data-filter="expertise">
            <option value="">All Expertise</option>
            <option value="consumer-goods">Consumer Goods</option>
            <option value="technology">Technology</option>
            <option value="retail">Retail</option>
            <option value="manufacturing">Manufacturing</option>
            <option value="export">Export/International</option>
          </select>
        </div>

        <!-- Generation Filter -->
        <div class="all-founders__filter-group">
          <label class="all-founders__filter-label">Generation</label>
          <select class="all-founders__filter-select" data-filter="generation">
            <option value="">All Generations</option>
            <option value="first">First Generation</option>
            <option value="second">Second Generation</option>
            <option value="third">Third Generation</option>
          </select>
        </div>
      </div>
    </div>
  {% endif %}

  <div class="all-founders__content">
    {% assign all_founders = site.founders | where: "lang", current_lang | sort: "name" %}

    {% if premium_teaser and all_founders.size > 15 %}
      <div class="all-founders__premium-notice">
        <div class="all-founders__premium-content">
          <h3 class="all-founders__premium-title">Premium Founder Profiles</h3>
          <p class="all-founders__premium-text">
            Showing sample of {{ all_founders.size }}+ founder profiles. Premium access includes complete database with contact information and investment details.
          </p>
          <a href="/premium/" class="btn btn--secondary">Upgrade for Full Access</a>
        </div>
      </div>
      {% assign founders_to_show = all_founders | limit: 15 %}
    {% else %}
      {% assign founders_to_show = all_founders | limit: items_per_page %}
    {% endif %}

    {% if founders_to_show.size > 0 %}
      <div class="all-founders__list" data-filterable="founders">
        {% for founder in founders_to_show %}
          <div class="all-founders__item"
               data-markets="{{ founder.country }}"
               data-expertise="{% for skill in founder.expertise %}{{ skill }}{% unless forloop.last %} {% endunless %}{% endfor %}"
               data-generation="{{ founder.generation }}">

            <div class="all-founders__item-content">
              <div class="all-founders__item-header">
                <div class="all-founders__item-avatar">
                  {% if founder.images.portrait %}
                    {% assign portrait_path = '/assets/images/founders/' | append: founder.ref | append: '/' | append: founder.ref | append: '-portrait-' | append: founder.images.portrait.name | append: '-400w.' | append: founder.images.portrait.ext %}
                    <img src="{{ portrait_path | relative_url }}"
                         alt="{{ founder.name }}"
                         class="all-founders__item-avatar-img">
                  {% else %}
                    <div class="all-founders__item-avatar-placeholder">
                      {{ founder.name | slice: 0, 2 | upcase }}
                    </div>
                  {% endif %}
                </div>

                <div class="all-founders__item-info">
                  <h3 class="all-founders__item-name">
                    <a href="{{ founder.url }}">{{ founder.name }}</a>
                  </h3>
                  <div class="all-founders__item-title">{{ founder.position }}</div>
                  <div class="all-founders__item-company">{{ founder.company }}</div>
                  <div class="all-founders__item-location">
                    {% include helpers/country-flag.html country_code=founder.country %}
                    {{ founder.city }}{% if founder.region %}, {{ founder.region }}{% endif %}
                  </div>
                </div>
              </div>

              <div class="all-founders__item-body">
                <p class="all-founders__item-bio">
                  {{ founder.brief_bio | strip_html | truncatewords: 20 }}
                </p>

                {% if founder.expertise.size > 0 %}
                  <div class="all-founders__item-expertise">
                    <span class="all-founders__item-label">Expertise:</span>
                    {% for skill in founder.expertise limit: 3 %}
                      <span class="all-founders__item-tag">{{ skill }}</span>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="all-founders__footer">
        <div class="all-founders__count">
          <span class="all-founders__count-text">
            Showing {{ founders_to_show.size }} of {{ all_founders.size }} founders
          </span>
        </div>
      </div>
    {% else %}
      <div class="all-founders__empty">
        <p class="all-founders__empty-message">
          No founders found matching your criteria.
        </p>
      </div>
    {% endif %}
  </div>
</div>