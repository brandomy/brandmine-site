{% comment %}
  Component: pages/insights/recent-insights.html
  Purpose: Shows recent insights section with linear layout (no sidebar)
  Parameters:
    - heading: The heading for the section (default from translations)
    - panel_type: The type of panel to use (default: light)
    - limit: Number of insights to show (default: 8)
  Dependencies:
    - assets/css/pages/insights/recent-insights.scss
    - components/cards/insight-card.html
{% endcomment %}

{% assign t = site.data.translations[page.lang].insights %}
{% assign panel_type = include.panel_type | default: "light" %}
{% assign limit = include.limit | default: 8 %}

<div class="panel panel--{{ panel_type }}">
  <div class="panel__content">
    <h2 class="panel__heading-secondary">{{ include.heading | default: t.recent_insights | default: "Recent Insights" }}</h2>

    {% assign description_text = t.recent_insights_description | default: "Stay current with the latest analysis and thought leadership on BRICS+ consumer brands and emerging market trends." %}
    {% if description_text %}
      <p class="panel__lead-text">
        {{ description_text }}
      </p>
    {% endif %}

    <div class="recent-insights__grid">
      {% assign insights = site.insights | where: "lang", page.lang | sort: "date" | reverse | limit: limit %}
      {% if insights.size > 0 %}
        {% for insight in insights %}
          {% include components/cards/insight-card.html insight=insight %}
        {% endfor %}
      {% else %}
        <div class="recent-insights__empty">
          <p class="recent-insights__empty-message">{{ t.no_insights | default: "No insights available yet." }}</p>
        </div>
      {% endif %}
    </div>

    {% if site.insights.size > limit %}
      <div class="recent-insights__footer">
        <a href="{{ site.baseurl }}/{{ page.lang }}/insights/categories/" class="btn btn--secondary">
          {{ t.view_all_insights | default: "View All Insights" }}
        </a>
      </div>
    {% endif %}
  </div>
</div>
