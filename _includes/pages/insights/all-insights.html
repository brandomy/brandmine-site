{% comment %}
  Component: pages/insights/all-insights.html
  Purpose: Main content section for the insights page showing all insights with sidebar filters
  Parameters:
    - heading: The heading for the section (default from translations)
    - panel_type: The type of panel to use (default: light)
  Dependencies:
    - assets/css/pages/insights/all-insights.scss
    - components/cards/insight-card.html
{% endcomment %}

{% assign t = site.data.translations[page.lang].insights %}
{% assign d = site.data.translations[page.lang].dimensions %}
{% assign panel_type = include.panel_type | default: "light" %}

<div class="panel panel--{{ panel_type }}">
  <div class="panel__content">
    <div class="insights-all__container">
      <div class="insights-all__main">
        <h2 class="panel__heading-secondary">{{ include.heading | default: t.all_insights }}</h2>

        <div class="insights-all__grid">
          {% assign insights = site.insights | where: "lang", page.lang | sort: "date" | reverse %}
          {% if insights.size > 0 %}
            {% for insight in insights %}
              {% include components/cards/insight-card.html insight=insight %}
            {% endfor %}
          {% else %}
            <div class="insights-all__empty">
              <p class="insights-all__empty-message">{{ t.no_insights }}</p>
            </div>
          {% endif %}
        </div>
      </div>

      <div class="insights-all__sidebar">
        {% include components/search/insights-search.html %}
        {% include components/filters/categories-filter.html insights=insights %}
        {% include components/filters/dimensions-filter.html insights=insights dimension_type="markets" %}
        {% include components/filters/dimensions-filter.html insights=insights dimension_type="sectors" %}
        {% include components/filters/dimensions-filter.html insights=insights dimension_type="attributes" %}
        {% include components/filters/featured-brands-filter.html insights=insights %}
      </div>
    </div>
  </div>
</div>
