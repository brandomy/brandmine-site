<!-- _includes/pages/brand/sidebar.html (refactored) -->
{% comment %}
  Component: pages/brand/sidebar.html
  Purpose: Displays the sidebar for a brand page
  Parameters:
    - brand: The brand object to display (default: page)
  Dependencies:
    - Components in _includes/components/brand/
    - assets/css/pages/brand/sidebar.scss
{% endcomment %}

{% assign brand = include.brand | default: page %}

<div class="brand-sidebar">
  <!-- Brand Sectors -->
  {% if brand.sectors %}
    {% assign sectors_label = site.data.translations[brand.lang].dimensions.sectors %}
    {% assign sectors_translations = site.data.dimensions[brand.lang].sectors %}

    {% include collections/dimensions/dimension-list.html
      label=sectors_label
      items=brand.sectors
      type="sector"
      translations=sectors_translations
      lang=brand.lang
      base_url=site.baseurl
      linkable=true %}
  {% endif %}

  <!-- Brand Markets -->
  {% if brand.markets %}
    {% assign markets_label = site.data.translations[brand.lang].dimensions.markets %}
    {% assign markets_translations = site.data.dimensions[brand.lang].markets %}

    {% include collections/dimensions/dimension-list.html
      label=markets_label
      items=brand.markets
      type="market"
      translations=markets_translations
      lang=brand.lang
      base_url=site.baseurl
      linkable=true %}
  {% endif %}

  <!-- Brand Attributes -->
  {% if brand.attributes %}
    {% assign attributes_label = site.data.translations[brand.lang].dimensions.attributes %}

    {% include components/brand/tag-list.html
       tags=brand.attributes
       dimension_type="attributes"
       heading=attributes_label
       lang=brand.lang %}
  {% endif %}

  <!-- Brand Signals -->
  {% if brand.signals and brand.featured_level > 0 %}
    {% assign signals_label = site.data.translations[brand.lang].dimensions.signals %}

    {% include components/brand/tag-list.html
       tags=brand.signals
       dimension_type="signals"
       heading=signals_label
       lang=brand.lang %}
  {% endif %}

  <!-- Contact Information -->
  {% if brand.featured_level > 0 and (brand.contact_email or brand.website) %}
    {% include components/brand/contact-info.html
       email=brand.contact_email
       website=brand.website
       lang=brand.lang %}
  {% endif %}

  <!-- Social Media Links -->
  {% if brand.featured_level > 0 and brand.social_media %}
    {% include components/brand/social-media-icons.html
       social=brand.social_media
       lang=brand.lang %}
  {% endif %}

  <!-- Related Insights -->
  {% include components/brand/related-insights.html
     brand_slug=brand.slug
     lang=brand.lang
     limit=3 %}
</div>
