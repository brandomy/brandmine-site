{% comment %}
  Brand Identity Section
  Displays: Brand name, tagline, founding info, basic meta
  Supports: Both YAML and JSON data sources
{% endcomment %}

{% assign brand = include.brand %}
{% assign data_source = include.data_source | default: "curated" %}
{% assign t = site.data.translations[brand.lang].brand %}
{% assign tags_t = site.data.translations[brand.lang].tags %}

{% comment %} Field mapping: YAML â†’ JSON fallback {% endcomment %}
{% assign brand_name = brand.title | default: brand.name %}
{% assign brand_description = brand.description %}
{% assign brand_slogan = brand.slogan %}
{% assign founding_year = brand.founding_year | default: brand.founded %}
{% assign website = brand.website %}

<div class="panel panel--hero">
  <div class="panel__content">
    <div class="brand-identity">
      <div class="brand-identity__header">
        <h1 id="heading-identity" class="brand-identity__name">{{ brand_name }}</h1>
        {% if brand_slogan %}
          <p class="brand-identity__slogan">{{ brand_slogan }}</p>
        {% endif %}
        {% if brand_description %}
          <p class="brand-identity__description">{{ brand_description }}</p>
        {% endif %}
        
        {% comment %} Data source indicator {% endcomment %}
        {% if data_source == "basic" %}
          <span class="data-badge data-badge--basic">{{ site.data.translations[brand.lang].ui.basic_profile | default: "Basic Profile" }}</span>
        {% endif %}
      </div>
      
      <div class="brand-identity__meta">
        {% if founding_year %}
        <div class="meta-item">
          <span class="meta-label">{{ t.founding_year | default: "Founded" }}:</span>
          <span class="meta-value">{{ founding_year }}</span>
        </div>
        {% endif %}
        
        {% if brand.location %}
        <div class="meta-item">
          <span class="meta-label">{{ t.location | default: "Location" }}:</span>
          <span class="meta-value">
            {{ brand.location.city }}{% if brand.location.region %}, {{ brand.location.region }}{% endif %}
          </span>
        </div>
        {% endif %}
        
        {% if website %}
        <div class="meta-item">
          <span class="meta-label">{{ t.website | default: "Website" }}:</span>
          <a href="{{ website }}" target="_blank" class="meta-value meta-link">{{ website | remove: 'https://' | remove: 'http://' }}</a>
        </div>
        {% endif %}
      </div>

      <!-- Taxonomy Tags - markets, sectors, attributes, signals -->
      <div class="brand-identity__taxonomy">
        <!-- Markets -->
        {% if brand.markets and brand.markets.size > 0 %}
          <div class="taxonomy-group">
            <h3 class="taxonomy-heading">{{ tags_t.markets | default: "Markets" }}</h3>
            <div class="taxonomy-tags">
              {% for market in brand.markets %}
                <span class="tag tag--market">
                  {{ site.data.dimensions[brand.lang].markets[market] | default: market | replace: '-', ' ' | capitalize }}
                </span>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- Sectors -->
        {% if brand.sectors and brand.sectors.size > 0 %}
          <div class="taxonomy-group">
            <h3 class="taxonomy-heading">{{ tags_t.sectors | default: "Sectors" }}</h3>
            <div class="taxonomy-tags">
              {% for sector in brand.sectors %}
                <span class="tag tag--sector">
                  {{ site.data.dimensions[brand.lang].sectors[sector] | default: sector | replace: '-', ' ' | capitalize }}
                </span>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- Attributes -->
        {% if brand.attributes and brand.attributes.size > 0 %}
          <div class="taxonomy-group">
            <h3 class="taxonomy-heading">{{ tags_t.attributes | default: "Attributes" }}</h3>
            <div class="taxonomy-tags">
              {% for attribute in brand.attributes %}
                <span class="tag tag--attribute">
                  {{ site.data.dimensions[brand.lang].attributes[attribute] | default: attribute | replace: '-', ' ' | capitalize }}
                </span>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        <!-- Signals -->
        {% if brand.signals and brand.signals.size > 0 %}
          <div class="taxonomy-group">
            <h3 class="taxonomy-heading">{{ tags_t.signals | default: "Signals" }}</h3>
            <div class="taxonomy-tags">
              {% for signal in brand.signals %}
                <span class="tag tag--signal">
                  {{ site.data.dimensions[brand.lang].signals[signal] | default: signal | replace: '-', ' ' | capitalize }}
                </span>
              {% endfor %}
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>