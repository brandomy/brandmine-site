{% comment %}
  Component: pages/brand/related-brands.html
  Purpose: Displays the related brands section of a brand page
  Parameters:
    - brand: The brand object to display (default: page)
    - show_related: Whether to show the related brands section (default: true)
    - limit: The number of related brands to display (default: all)
  Dependencies:
    - assets/css/pages/brand/related-brands.scss
    - components/cards/related-brand-card.html
    - site.data.translations[lang].brand
    - site.brands collection
{% endcomment %}

{% assign brand = include.brand | default: page %}
{% assign show_related = include.show_related | default: true %}
{% assign limit = include.limit | default: 100 %}

<!-- Updated related-brands.html -->
{% if show_related and brand.related_brands %}
<div class="brand-related">
  <h2 class="brand-related__heading">{{ site.data.translations[brand.lang].brand.related_brands }}</h2>
  <div class="brand-related__grid">
    {% for related_brand_slug in brand.related_brands limit: limit %}
      {% assign related_brand = site.brands | where: "slug", related_brand_slug | where: "lang", brand.lang | first %}
      {% if related_brand %}
        {% include components/cards/related-brand-card.html
           brand=related_brand
           parent_lang=brand.lang %}
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endif %}
