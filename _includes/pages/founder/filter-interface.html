{% comment %}
  Component: pages/founder/filter-interface.html
  
  Purpose: Displays the filter and search interface for browsing founders
  
  Parameters:
    content_type (optional): Type of content to filter, defaults to "founders"
    taxonomy (optional): Taxonomy data for filtering
    
  Dependencies:
    - CSS: pages/founder/filter-interface.scss
    - _includes/components/search/search-filter.html
    - site.data.translations for labels
{% endcomment %}

<div class="founders-filter">
  <div class="founders__interface">
    <!-- Filter Column -->
    <div class="founders__filters">
      <h3>{{ site.data.translations[page.lang].filter.filter_by }}</h3>
      
      <!-- Market Filter -->
      <div class="filter-section">
        <h4>{{ site.data.translations[page.lang].dimensions.markets }}</h4>
        <div class="filter-options" id="market-filters">
          {% assign markets = "" | split: "," %}
          {% assign founder_markets = site.founders | where: "lang", page.lang | map: "country_code" | uniq %}
          
          {% for market_code in founder_markets %}
            {% if market_code %}
              {% assign market_name = site.data.dimensions[page.lang].markets[market_code] | default: market_code %}
              <div class="filter-option">
                <input type="checkbox" id="market-{{ market_code }}" name="market" value="{{ market_code }}">
                <label for="market-{{ market_code }}">{{ market_name }}</label>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      
      <!-- Expertise Filter -->
      <div class="filter-section">
        <h4>{{ site.data.translations[page.lang].founder.filter_by_expertise }}</h4>
        <div class="filter-options" id="expertise-filters">
          {% assign all_expertise = "" | split: "," %}
          {% for founder in site.founders %}
            {% if founder.lang == page.lang and founder.expertise %}
              {% for exp in founder.expertise %}
                {% assign all_expertise = all_expertise | push: exp %}
              {% endfor %}
            {% endif %}
          {% endfor %}
          
          {% assign unique_expertise = all_expertise | uniq | sort %}
          {% for exp in unique_expertise %}
            <div class="filter-option">
              <input type="checkbox" id="expertise-{{ exp | slugify }}" name="expertise" value="{{ exp }}">
              <label for="expertise-{{ exp | slugify }}">{{ exp }}</label>
            </div>
          {% endfor %}
        </div>
      </div>
      
      <!-- Reset Filters -->
      <div class="filter-actions">
        <button id="reset-filters" class="btn-text">{{ site.data.translations[page.lang].filter.reset }}</button>
      </div>
    </div>
    
    <div class="founders__results">
      <div class="founders__results-header">
        <h2 id="results-count">{{ site.data.translations[page.lang].founder.all_founders }}</h2>
        
        <!-- Sort Options -->
        <div class="founders__controls">
          <div class="founders__sort">
            <label for="sort-select">{{ site.data.translations[page.lang].sort.label }}:</label>
            <select id="sort-select">
              <option value="name">{{ site.data.translations[page.lang].sort.name }}</option>
              <option value="market">{{ site.data.translations[page.lang].sort.market }}</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>