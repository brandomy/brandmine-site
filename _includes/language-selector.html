<!-- _includes/language-selector.html - Suggested fix -->
<div class="language-selector">
  <!-- Get unique language options by filtering site pages -->
  {% assign langs = "en,ru,zh" | split: "," %}
  
  {% for lang in langs %}
    <a href="{{ site.baseurl }}/{{ lang }}/" class="{% if page.lang == lang %}active{% endif %}">
      {{ lang | upcase }}
    </a>
  {% endfor %}
</div>





<!-- OLD CODE

<div class="language-selector">
  {% assign pages=site.pages | where:"ref", page.ref | sort: 'lang' %}
  {% for p in pages %}
    <a href="{{ p.url }}" class="{% if p.lang == page.lang %}active{% endif %}">
      {{ p.lang | upcase }}
    </a>
  {% endfor %}
</div> -->