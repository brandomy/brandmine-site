{% comment %}
================================================================================
COMPONENT: Google Analytics Tracking
PATH: _includes/utilities/google-analytics.html
PURPOSE: Implements GA4 tracking with multilingual support and privacy compliance
CREATED: 2024-01-01 | VERSION: 1.1
================================================================================

Features:
- GA4 (Google Analytics 4) tracking implementation
- Production-environment only loading (no dev tracking)
- IP anonymization for GDPR compliance
- Multilingual page tracking and segmentation
- Asynchronous script loading for performance
- Proper page path configuration for accurate analytics

Parameters:
- No direct parameters (uses global site and page variables)
- site.google_analytics_id (implicit): String - GA4 measurement ID from _config.yml
- page.url (implicit): String - Current page URL for tracking
- page.lang (implicit): String - Page language for analytics segmentation
- jekyll.environment (implicit): String - Build environment (production/development)

Dependencies:
- External: Google Analytics/Google Tag Manager scripts
- Configuration: google_analytics_id must be set in _config.yml
- Environment: Only active in production builds

Usage Examples:
{% include utilities/google-analytics.html %}

Real-world Usage:
Included in _layouts/default.html within the <head> section for site-wide tracking

BEM Structure:
- Not applicable (JavaScript utility, no CSS classes)

Accessibility:
- Non-visual tracking component
- No impact on screen readers or keyboard navigation
- Complies with privacy regulations through IP anonymization

Responsive:
- Not applicable (tracking utility has no visual component)

Performance Notes:
- Async script loading prevents render blocking
- Production-only loading reduces development overhead
- Minimal tracking payload with essential parameters
- Google CDN delivery for optimal performance

Privacy Notes:
- IP anonymization enabled for GDPR compliance
- Production-only tracking protects development privacy
- Language tracking for localization analytics
- Standard Google Analytics privacy policies apply
================================================================================
{% endcomment %}

{% if jekyll.environment == 'production' %}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics_id }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ site.google_analytics_id }}', {
    'page_path': '{{ page.url }}',
    'language': '{{ page.lang }}',
    'anonymize_ip': true
  });
</script>
{% endif %}