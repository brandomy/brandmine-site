---
layout: default
---
<!-- ----------------------------------------------------------------------------
  FOUNDERS INDEX LAYOUT
  ------------------------------------------------------------------------------
  This layout powers the main directory page for viewing all founder profiles.
  It is assigned to the `/founders/` page in each supported language.

  Purpose:
  - Renders a search-and-filter interface for browsing founders
  - Displays founder cards in a responsive grid layout
  - Supports dynamic search, filtering by market and expertise
  - Multilingual content and labels are driven by `page.lang`

  Used by:
  - pages/en/founders.md
  - pages/ru/founders.md
  - pages/zh/founders.md

  Dependencies:
  - _includes/components/cards/founder-card.html (displays each founder summary)
  - site.data.translations for UI labels
  - site.data.dimensions for taxonomy translations
---------------------------------------------------------------------------- -->

<div class="panel panel--light">
  <div class="panel__content">
    <h1>{{ page.title }}</h1>
    
    <div class="search-container">
      <input type="text" id="founder-search" placeholder="{{ site.data.translations[page.lang].search.founder_placeholder | default: site.data.translations[page.lang].search.placeholder }}" class="search-input">
      <button id="search-button" class="search-button">{{ site.data.translations[page.lang].search.button }}</button>
    </div>
    
    <div class="founders__interface">
      <!-- Filter Column -->
      <div class="founders__filters">
        <h3>{{ site.data.translations[page.lang].filter.filter_by }}</h3>
        
        <!-- Market Filter -->
        <div class="filter-section">
          <h4>{{ site.data.translations[page.lang].dimensions.markets }}</h4>
          <div class="filter-options" id="market-filters">
            {% assign markets = "" | split: "," %}
            {% assign founder_markets = site.founders | where: "lang", page.lang | map: "country_code" | uniq %}
            
            {% for market_code in founder_markets %}
              {% if market_code %}
                {% assign market_name = site.data.dimensions[page.lang].markets[market_code] | default: market_code %}
                <div class="filter-option">
                  <input type="checkbox" id="market-{{ market_code }}" name="market" value="{{ market_code }}">
                  <label for="market-{{ market_code }}">{{ market_name }}</label>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        
        <!-- Expertise Filter -->
        <div class="filter-section">
          <h4>{{ site.data.translations[page.lang].founder.filter_by_expertise }}</h4>
          <div class="filter-options" id="expertise-filters">
            {% assign all_expertise = "" | split: "," %}
            {% for founder in site.founders %}
              {% if founder.lang == page.lang and founder.expertise %}
                {% for exp in founder.expertise %}
                  {% assign all_expertise = all_expertise | push: exp %}
                {% endfor %}
              {% endif %}
            {% endfor %}
            
            {% assign unique_expertise = all_expertise | uniq | sort %}
            {% for exp in unique_expertise %}
              <div class="filter-option">
                <input type="checkbox" id="expertise-{{ exp | slugify }}" name="expertise" value="{{ exp }}">
                <label for="expertise-{{ exp | slugify }}">{{ exp }}</label>
              </div>
            {% endfor %}
          </div>
        </div>
        
        <!-- Reset Filters -->
        <div class="filter-actions">
          <button id="reset-filters" class="btn-text">{{ site.data.translations[page.lang].filter.reset }}</button>
        </div>
      </div>
      
      <div class="founders__results">
        <div class="founders__results-header">
          <h2 id="results-count">{{ site.data.translations[page.lang].founder.all_founders }}</h2>
          
          <!-- Sort Options -->
          <div class="founders__controls">
            <div class="founders__sort">
              <label for="sort-select">{{ site.data.translations[page.lang].sort.label }}:</label>
              <select id="sort-select">
                <option value="name">{{ site.data.translations[page.lang].sort.name }}</option>
                <option value="market">{{ site.data.translations[page.lang].sort.market }}</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Founders Grid -->
        <div id="founders-container" class="founders__grid">
          {% assign founders = site.founders | where: "lang", page.lang %}
          {% for founder in founders %}
            {% include components/cards/founder-card.html founder=founder %}
          {% endfor %}
        </div>
        
        <!-- Empty State Message (shown when no results match) -->
        <div id="empty-results" class="founders__empty-results" style="display: none;">
          <p>{{ site.data.translations[page.lang].filter.no_results }}</p>
        </div>
        
        <!-- Load More Button -->
        <div class="founders__load-more-container">
          <button id="load-more" class="btn-secondary">{{ site.data.translations[page.lang].pagination.load_more }}</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Featured Founders Section -->
<div class="panel panel--olive-soft">
  <div class="panel__content">
    <h2 class="panel__heading-secondary">{{ site.data.translations[page.lang].founder.featured_founders }}</h2>
    <p class="panel__lead-text">{{ site.data.translations[page.lang].founder.featured_description }}</p>
    
    <div class="featured-founders__grid">
      {% assign featured_founders = site.founders | where: "lang", page.lang | where: "featured", true | limit: 3 %}
      {% for founder in featured_founders %}
        {% include components/cards/founder-card.html founder=founder featured=true %}
      {% endfor %}
    </div>
  </div>
</div>

<!-- Recently Added Founders -->
<div class="panel panel--light">
  <div class="panel__content">
    <h2 class="panel__heading-secondary">{{ site.data.translations[page.lang].founder.recently_added }}</h2>
    
    <div class="recent-founders__grid">
      {% assign recent_founders = site.founders | where: "lang", page.lang | sort: "date" | reverse | limit: 4 %}
      {% for founder in recent_founders %}
        {% include components/cards/founder-card.html founder=founder %}
      {% endfor %}
    </div>
  </div>
</div>

<!-- JavaScript for founder filtering and display -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Search functionality
    const searchInput = document.getElementById('founder-search');
    const searchButton = document.getElementById('search-button');
    const founderCards = document.querySelectorAll('.founder-card');
    const resultsCount = document.getElementById('results-count');
    const emptyResults = document.getElementById('empty-results');
    const loadMoreBtn = document.getElementById('load-more');
    const sortSelect = document.getElementById('sort-select');
    
    // Filter elements
    const marketFilters = document.querySelectorAll('#market-filters input');
    const expertiseFilters = document.querySelectorAll('#expertise-filters input');
    const resetFiltersBtn = document.getElementById('reset-filters');
    
    // Track active filters
    let activeFilters = {
      search: '',
      markets: [],
      expertise: []
    };
    
    // Initial display count
    const initialDisplayCount = 12;
    let currentDisplayCount = initialDisplayCount;
    
    // Apply filters and update display
    function applyFilters() {
      let matchCount = 0;
      let hiddenCount = 0;
      
      founderCards.forEach((card, index) => {
        // Check if card matches all active filters
        const searchMatch = activeFilters.search === '' || 
          card.dataset.name.toLowerCase().includes(activeFilters.search.toLowerCase());
        
        const marketMatch = activeFilters.markets.length === 0 || 
          activeFilters.markets.includes(card.dataset.market);
        
        // Handle expertise matching (data-expertise might be a comma-separated list)
        let expertiseMatch = true;
        if (activeFilters.expertise.length > 0) {
          const cardExpertise = card.dataset.expertise ? card.dataset.expertise.split(',') : [];
          expertiseMatch = activeFilters.expertise.some(exp => cardExpertise.includes(exp));
        }
        
        const matchesFilters = searchMatch && marketMatch && expertiseMatch;
        
        if (matchesFilters) {
          matchCount++;
          // Show card if it's within the display count
          if (matchCount <= currentDisplayCount) {
            card.style.display = '';
          } else {
            card.style.display = 'none';
            hiddenCount++;
          }
        } else {
          card.style.display = 'none';
        }
      });
      
      // Update results count
      resultsCount.textContent = matchCount === 1 
        ? `${matchCount} ${site.data.translations[page.lang].founder.founder_result}`
        : `${matchCount} ${site.data.translations[page.lang].founder.founder_results}`;
      
      // Show/hide empty state
      emptyResults.style.display = matchCount === 0 ? 'block' : 'none';
      
      // Show/hide load more button
      loadMoreBtn.style.display = hiddenCount > 0 ? 'block' : 'none';
    }
    
    // Initialize search
    if (searchButton) {
      searchButton.addEventListener('click', function() {
        activeFilters.search = searchInput.value.trim();
        currentDisplayCount = initialDisplayCount;
        applyFilters();
      });
    }
    
    if (searchInput) {
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          activeFilters.search = searchInput.value.trim();
          currentDisplayCount = initialDisplayCount;
          applyFilters();
        }
      });
    }
    
    // Initialize market filters
    marketFilters.forEach(filter => {
      filter.addEventListener('change', function() {
        activeFilters.markets = Array.from(document.querySelectorAll('#market-filters input:checked'))
          .map(input => input.value);
        currentDisplayCount = initialDisplayCount;
        applyFilters();
      });
    });
    
    // Initialize expertise filters
    expertiseFilters.forEach(filter => {
      filter.addEventListener('change', function() {
        activeFilters.expertise = Array.from(document.querySelectorAll('#expertise-filters input:checked'))
          .map(input => input.value);
        currentDisplayCount = initialDisplayCount;
        applyFilters();
      });
    });
    
    // Reset filters
    if (resetFiltersBtn) {
      resetFiltersBtn.addEventListener('click', function() {
        // Clear search
        searchInput.value = '';
        activeFilters.search = '';
        
        // Uncheck all filter checkboxes
        marketFilters.forEach(filter => { filter.checked = false; });
        expertiseFilters.forEach(filter => { filter.checked = false; });
        
        activeFilters.markets = [];
        activeFilters.expertise = [];
        
        // Reset display count and apply filters
        currentDisplayCount = initialDisplayCount;
        applyFilters();
      });
    }
    
    // Load more
    if (loadMoreBtn) {
      loadMoreBtn.addEventListener('click', function() {
        currentDisplayCount += initialDisplayCount;
        applyFilters();
      });
    }
    
    // Sorting
    if (sortSelect) {
      sortSelect.addEventListener('change', function() {
        const sortValue = this.value;
        const foundersContainer = document.getElementById('founders-container');
        const cards = Array.from(founderCards);
        
        // Sort cards
        cards.sort((a, b) => {
          if (sortValue === 'name') {
            return a.dataset.name.localeCompare(b.dataset.name);
          } else if (sortValue === 'market') {
            return a.dataset.market.localeCompare(b.dataset.market);
          }
          return 0;
        });
        
        // Reorder in DOM
        cards.forEach(card => {
          foundersContainer.appendChild(card);
        });
        
        // Re-apply filters
        applyFilters();
      });
    }
    
    // Initial display
    applyFilters();
  });
</script>