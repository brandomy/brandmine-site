---
layout: default
---

<!-- ----------------------------------------------------------------------------
  DIMENSION LAYOUT
  ------------------------------------------------------------------------------
  This layout is used for all individual tag pages under the /discover/ section,
  such as a specific Sector (e.g., Wine), Market (e.g., Brazil), Attribute 
  (e.g., Founder-Led), or Signal (e.g., High Growth).

  Purpose:
  - Displays a filtered brand listing tied to a single tag and dimension type.
  - Shows Featured Brands, Additional Brands, and Related Insights.
  - Supports tag-type-specific filters (e.g., market dropdowns on sector pages).
  - Handles multilingual rendering via page.lang and translation data files.

  Navigation:
  - Uses collections/dimensions/discovery-navigation.html include to render consistent navigation tabs.
  - Applies a dynamic class to style the tab background based on tag type.

  Typically used in:
  - /en/discover/sectors/wine.md
  - /zh/discover/markets/china.md
  - /ru/discover/attributes/founder-led.md

  Dependencies:
  - _includes/collections/dimensions/discovery-navigation.html
  - Uses `page.tag_type` and `page.discovery_path` in front matter
----------------------------------------------------------------------------- -->


{% assign discovery_class = '' %}
{% if page.discovery_path == 'sectors' %}
  {% assign discovery_class = 'discovery-tabs-container--sectors' %}
{% elsif page.discovery_path == 'markets' %}
  {% assign discovery_class = 'discovery-tabs-container--markets' %}
{% elsif page.discovery_path == 'attributes' %}
  {% assign discovery_class = 'discovery-tabs-container--attributes' %}
{% elsif page.discovery_path == 'signals' %}
  {% assign discovery_class = 'discovery-tabs-container--signals' %}
{% endif %}

{% include collections/dimensions/discovery-navigation.html container_class=discovery_class %}




<div class="panel panel--{{ page.tag_type }}-soft">
  <div class="panel__content tag-page">
      <div class="tag-page__content">
      {{ content }}
    </div>

    <!-- Market-Specific Information (if available) -->
    <div class="panel panel--accent-soft">
      <div class="panel__content">
        <h2 class="panel__heading-secondary">{{ site.data.translations[page.lang].sectors.market_highlights | default: "Market Highlights" }}</h2>
        
        <div class="market-highlights">
          {% for market_entry in site.data.markets[page.lang] %}
            {% assign market_slug = market_entry.id %}
            {% if site.data.market_sectors[page.lang][market_slug] and site.data.market_sectors[page.lang][market_slug][page.dimension] %}
              {% include market-sector-highlight.html market=market_slug sector=page.dimension %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Market-Specific Sectors -->
    <div class="panel panel--olive-soft">
      <div class="panel__content">
        <h2 class="panel__heading-secondary">{{ site.data.translations[page.lang].markets.key_sectors | default: "Key Sectors" }}</h2>
        
        <div class="market-sectors-preview">
          {% assign market_sectors = site.data.market_sectors[page.lang][page.dimension] %}
          {% for sector_entry in market_sectors limit:3 %}
            {% assign sector_slug = sector_entry[0] %}
            {% assign sector_data = sector_entry[1] %}
            
            <div class="market-sectors-preview__item">
              <h3 class="market-sectors-preview__title">{{ sector_data.title }}</h3>
              <p class="market-sectors-preview__description">{{ sector_data.description }}</p>
              <a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ page.dimension }}/sectors/{{ sector_slug }}/" class="market-sectors-preview__link">
                Learn More
              </a>
            </div>
          {% endfor %}
          
          {% if market_sectors.size > 3 %}
            <div class="market-sectors-preview__view-all">
              <a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ page.dimension }}/sectors/" class="btn btn--secondary">
                {{ site.data.translations[page.lang].markets.view_all_sectors | default: "View All Sectors" }}
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <!-- 1. FEATURED BRANDS SECTION -->
    <div class="tag-page__featured-brands">
      <h2 class="tag-page__section-title">Featured {{ page.title }}</h2>
      
      {% assign related_brands = site.brands | where: "lang", page.lang %}
      {% assign filtered_brands = "" | split: "" %}
      {% assign featured_brands = "" | split: "" %}
      
      {% for brand in related_brands %}
        {% if page.tag_type == "sector" and brand.sectors contains page.title %}
          {% assign filtered_brands = filtered_brands | push: brand %}
          {% if brand.featured == true %}
            {% assign featured_brands = featured_brands | push: brand %}
          {% endif %}
        {% elsif page.tag_type == "market" and brand.markets contains page.title %}
          {% assign filtered_brands = filtered_brands | push: brand %}
          {% if brand.featured == true %}
            {% assign featured_brands = featured_brands | push: brand %}
          {% endif %}
        {% elsif page.tag_type == "attribute" and brand.attributes contains page.title %}
          {% assign filtered_brands = filtered_brands | push: brand %}
          {% if brand.featured == true %}
            {% assign featured_brands = featured_brands | push: brand %}
          {% endif %}
        {% elsif page.tag_type == "signal" and brand.signals contains page.title %}
          {% assign filtered_brands = filtered_brands | push: brand %}
          {% if brand.featured == true %}
            {% assign featured_brands = featured_brands | push: brand %}
          {% endif %}
        {% endif %}
      {% endfor %}
      
      {% if featured_brands.size > 0 %}
        <div class="tag-page__featured-grid">
          {% for brand in featured_brands limit:4 %}
            <div class="tag-page__brand-feature-card">
              {% if brand.logo %}
              <img src="{{ brand.logo }}" alt="{{ brand.title }} logo" class="tag-page__brand-logo">
              {% else %}
              <div class="tag-page__brand-logo-placeholder"></div>
              {% endif %}
              <h3 class="tag-page__brand-title"><a href="{{ brand.url | relative_url }}">{{ brand.title }}</a></h3>
              <p class="tag-page__brand-description">{{ brand.description | truncate: 150 }}</p>
              <div class="tag-page__brand-meta">
                {% if brand.sectors %}
                <a href="{{ site.baseurl }}/{{ page.lang }}/discover/sectors/{{ brand.sectors[0] | slugify }}/" class="tag tag--sector">{{ brand.sectors[0] }}</a>
                {% endif %}
                {% if brand.markets %}
                <a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ brand.markets[0] | slugify }}/" class="tag tag--market">{{ brand.markets[0] }}</a>
                {% endif %}
              </div>
              <div class="tag-page__brand-action">
                <a href="{{ brand.url | relative_url }}" class="btn btn--primary-cta">View Brand</a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="tag-page__empty-state">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"></rect><path d="M12 8v8m-4-4h8"></path></svg>
          <p>No featured brands available.</p>
        </div>
      {% endif %}
    </div>
    
    <!-- 2. RELATED BRANDS CAROUSEL SECTION -->
    <div class="tag-page__related-brands">
      <h2 class="tag-page__section-title">More {{ page.title }} Brands</h2>
      
      {% assign non_featured_brands = "" | split: "" %}
      {% for brand in filtered_brands %}
        {% if brand.featured != true %}
          {% assign non_featured_brands = non_featured_brands | push: brand %}
        {% endif %}
      {% endfor %}
      
      {% if non_featured_brands.size > 0 %}
        <div class="tag-page__brands-carousel">
          {% for brand in non_featured_brands limit:8 %}
            <div class="tag-page__brand-card">
              {% if brand.logo %}
              <img src="{{ brand.logo }}" alt="{{ brand.title }} logo" class="tag-page__brand-logo">
              {% else %}
              <div class="tag-page__brand-logo-placeholder"></div>
              {% endif %}
              <h3 class="tag-page__brand-title"><a href="{{ brand.url | relative_url }}">{{ brand.title }}</a></h3>
              <p class="tag-page__brand-description">{{ brand.description | truncate: 80 }}</p>
              <div class="tag-page__brand-meta">
                {% if brand.sectors %}
                <a href="{{ site.baseurl }}/{{ page.lang }}/discover/sectors/{{ brand.sectors[0] | slugify }}/" class="tag tag--sector">{{ brand.sectors[0] }}</a>
                {% endif %}
                {% if brand.markets %}
                <a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ brand.markets[0] | slugify }}/" class="tag tag--market">{{ brand.markets[0] }}</a>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
        
        <!-- Carousel navigation dots -->
        <div class="tag-page__carousel-nav">
          <span class="tag-page__carousel-dot active"></span>
          <span class="tag-page__carousel-dot"></span>
          <span class="tag-page__carousel-dot"></span>
        </div>
      {% else %}
        <div class="tag-page__empty-state">
          <p>No additional brands available.</p>
        </div>
      {% endif %}
    </div>
    
    <!-- 3. ALL BRANDS LIST SECTION -->
    <div class="tag-page__all-brands">
      <h2 class="tag-page__section-title">All {{ page.title }} ({{ filtered_brands.size }})</h2>
      
      <!-- Filter interface -->
      <div class="tag-page__filter-controls">
        <div class="tag-page__filter-search">
          <input type="text" class="tag-page__filter-input" placeholder="Search brands..." id="brandsSearchInput">
          <button class="tag-page__filter-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          </button>
        </div>
        
        <div class="tag-page__filter-options">
          <select class="tag-page__filter-select" id="brandsSortSelect">
            <option value="name-asc">Name (A-Z)</option>
            <option value="name-desc">Name (Z-A)</option>
            <option value="latest">Newest First</option>
          </select>
          
          {% if page.tag_type == "sector" %}
          <select class="tag-page__filter-select" id="brandsMarketSelect">
            <option value="all">All Markets</option>
            {% for market in site.data.translations[page.lang].markets %}
              <option value="{{ market[0] }}">{{ market[1] }}</option>
            {% endfor %}
          </select>
          {% endif %}
        </div>
      </div>
      
      <!-- Brand list -->
      {% if filtered_brands.size > 0 %}
        <div class="tag-page__brands-list">
          {% for brand in filtered_brands %}
            <div class="tag-page__list-item" data-name="{{ brand.title | downcase }}" data-market="{{ brand.markets[0] | downcase }}">
              <div class="tag-page__list-item-content">
                <h3 class="tag-page__list-item-title"><a href="{{ brand.url | relative_url }}">{{ brand.title }}</a></h3>
                <div class="tag-page__list-item-meta">
                  {% if brand.markets %}
                  <a href="{{ site.baseurl }}/{{ page.lang }}/discover/markets/{{ brand.markets[0] | slugify }}/" class="tag tag--market tag--sm">{{ brand.markets[0] }}</a>
                  {% endif %}
                  {% if brand.sectors %}
                  <a href="{{ site.baseurl }}/{{ page.lang }}/discover/sectors/{{ brand.sectors[0] | slugify }}/" class="tag tag--sector tag--sm">{{ brand.sectors[0] }}</a>
                  {% endif %}
                </div>
              </div>
              <a href="{{ brand.url | relative_url }}" class="tag-page__list-item-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5l7 7-7 7"></path></svg>
              </a>
            </div>
          {% endfor %}
        </div>
        
        <!-- Load more button for large lists -->
        {% if filtered_brands.size > 20 %}
        <div class="tag-page__load-more">
          <button class="btn btn--secondary" id="loadMoreBrands">Load More</button>
        </div>
        {% endif %}
      {% else %}
        <div class="tag-page__empty-state">
          <p>No brands found in this category.</p>
        </div>
      {% endif %}
    </div>
    
    <!-- 4. RELATED INSIGHTS SECTION -->
    <div class="tag-page__related-insights">
      <h2 class="tag-page__section-title">Related Insights</h2>
      
      {% assign related_insights = site.insights | where: "lang", page.lang %}
      {% assign filtered_insights = "" | split: "" %}
      
      {% for insight in related_insights %}
        {% if page.tag_type == "sector" and insight.sectors contains page.title %}
          {% assign filtered_insights = filtered_insights | push: insight %}
        {% elsif page.tag_type == "market" and insight.markets contains page.title %}
          {% assign filtered_insights = filtered_insights | push: insight %}
        {% elsif page.tag_type == "attribute" and insight.attributes contains page.title %}
          {% assign filtered_insights = filtered_insights | push: insight %}
        {% elsif page.tag_type == "signal" and insight.signals contains page.title %}
          {% assign filtered_insights = filtered_insights | push: insight %}
        {% endif %}
      {% endfor %}
      
      {% if filtered_insights.size > 0 %}
        <div class="tag-page__insights-grid">
          {% for insight in filtered_insights limit:4 %}
          <div class="tag-page__insight-card">
            {% if insight.image %}
            <div class="tag-page__insight-image">
              <img src="{{ insight.image | relative_url }}" alt="{{ insight.title }}">
            </div>
            {% endif %}
            <div class="tag-page__insight-content">
              <div class="tag-page__insight-type">{{ insight.content_type }}</div>
              <h3 class="tag-page__insight-title"><a href="{{ insight.url | relative_url }}">{{ insight.title }}</a></h3>
              <p class="tag-page__insight-excerpt">{{ insight.excerpt | strip_html | truncate: 100 }}</p>
              <div class="tag-page__insight-meta">
                <span class="tag-page__insight-date">{{ insight.date | date: "%B %-d, %Y" }}</span>
                <a href="{{ insight.url | relative_url }}" class="tag-page__insight-link">Read More</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
          
        {% if filtered_insights.size > 4 %}
        <div class="tag-page__view-all">
          <a href="{{ site.baseurl }}/{{ page.lang }}/insights/?{{ page.tag_type }}={{ page.tag }}" class="btn btn--secondary">
            {{ site.data.translations[page.lang].tags.view_all_insights }}
          </a>
        </div>
        {% endif %}
      {% else %}
        <div class="tag-page__empty-state">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"></path><path d="M8 10h8M8 14h8"></path></svg>
          <p>{{ site.data.translations[page.lang].tags.no_insights }}</p>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- JavaScript for filtering and sorting functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Brand filtering functionality
  const searchInput = document.getElementById('brandsSearchInput');
  const sortSelect = document.getElementById('brandsSortSelect');
  const marketSelect = document.getElementById('brandsMarketSelect');
  const brandItems = document.querySelectorAll('.tag-page__list-item');
  const loadMoreBtn = document.getElementById('loadMoreBrands');
  
  let visibleCount = 20;
  
  // Initial setup - hide items beyond the initial count
  if (brandItems.length > visibleCount) {
    for (let i = visibleCount; i < brandItems.length; i++) {
      brandItems[i].style.display = 'none';
    }
  }
  
  // Load more function
  if (loadMoreBtn) {
    loadMoreBtn.addEventListener('click', function() {
      visibleCount += 20;
      
      // Show more items
      for (let i = 0; i < Math.min(visibleCount, brandItems.length); i++) {
        if (brandItems[i].classList.contains('filtered-in')) {
          brandItems[i].style.display = 'flex';
        }
      }
      
      // Hide button if all items are shown
      if (visibleCount >= brandItems.length) {
        loadMoreBtn.style.display = 'none';
      }
    });
  }
  
  // Filter function
  function filterBrands() {
    const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
    const sortValue = sortSelect ? sortSelect.value : 'name-asc';
    const marketValue = marketSelect ? marketSelect.value : 'all';
    
    // Reset visible count
    visibleCount = 20;
    
    // Show load more button if it exists
    if (loadMoreBtn) {
      loadMoreBtn.style.display = 'block';
    }
    
    // Filter items
    let filteredItems = Array.from(brandItems).filter(item => {
      const name = item.getAttribute('data-name').toLowerCase();
      const market = item.getAttribute('data-market').toLowerCase();
      
      const matchesSearch = !searchTerm || name.includes(searchTerm);
      const matchesMarket = marketValue === 'all' || market === marketValue;
      
      const showItem = matchesSearch && matchesMarket;
      
      // Add/remove filtered-in class
      if (showItem) {
        item.classList.add('filtered-in');
      } else {
        item.classList.remove('filtered-in');
      }
      
      return showItem;
    });
    
    // Sort items
    filteredItems.sort((a, b) => {
      const nameA = a.getAttribute('data-name');
      const nameB = b.getAttribute('data-name');
      
      if (sortValue === 'name-asc') {
        return nameA.localeCompare(nameB);
      } else if (sortValue === 'name-desc') {
        return nameB.localeCompare(nameA);
      }
      // Add more sorting options as needed
      return 0;
    });
    
    // Update DOM order based on sorting
    const container = document.querySelector('.tag-page__brands-list');
    filteredItems.forEach(item => container.appendChild(item));
    
    // Update visibility based on count
    filteredItems.forEach((item, index) => {
      item.style.display = index < visibleCount ? 'flex' : 'none';
    });
    
    // Update load more button visibility
    if (loadMoreBtn) {
      loadMoreBtn.style.display = filteredItems.length > visibleCount ? 'block' : 'none';
    }
  }
  
  // Set up event listeners
  if (searchInput) {
    searchInput.addEventListener('input', filterBrands);
  }
  
  if (sortSelect) {
    sortSelect.addEventListener('change', filterBrands);
  }
  
  if (marketSelect) {
    marketSelect.addEventListener('change', filterBrands);
  }
  
  // Carousel functionality
  const carousel = document.querySelector('.tag-page__brands-carousel');
  const dots = document.querySelectorAll('.tag-page__carousel-dot');
  
  if (carousel && dots.length) {
    dots.forEach((dot, index) => {
      dot.addEventListener('click', function() {
        // Calculate scroll position
        const cardWidth = 280; // Approximate width of a card
        const gapWidth = 16; // Approximate gap between cards
        const scrollAmount = index * (cardWidth + gapWidth) * 3; // 3 cards per page
        
        // Smooth scroll to position
        carousel.scrollTo({
          left: scrollAmount,
          behavior: 'smooth'
        });
        
        // Update active dot
        dots.forEach(d => d.classList.remove('active'));
        dot.classList.add('active');
      });
    });
    
    // Update dots on scroll
    carousel.addEventListener('scroll', function() {
      const scrollPosition = carousel.scrollLeft;
      const cardWidth = 280 + 16; // card + gap
      const visibleCards = 3;
      const pageWidth = cardWidth * visibleCards;
      
      const activePage = Math.floor(scrollPosition / pageWidth);
      
      dots.forEach((dot, index) => {
        if (index === activePage) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    });
  }
});
</script>