---
layout: default
---
<!-- ----------------------------------------------------------------------------
  BRANDS INDEX LAYOUT
  ------------------------------------------------------------------------------
  This layout powers the main directory page for viewing all brand profiles.
  It is assigned to the `/brands/` page in each supported language.

  Purpose:
  - Dynamically includes sections defined in the page's front matter
  - Provides page-scoped CSS through the brands-page class
  - Loads JavaScript for dynamic filtering behavior
  - Creates semantic <section> elements for better accessibility and SEO
---------------------------------------------------------------------------- -->

{% comment %} Set default sections if none specified {% endcomment %}
{% unless page.sections %}
  {% assign sections_to_render = "breadcrumbs,hero,content,filter-interface,featured-brands,recent-brands,contact-cta" | split: "," %}
{% else %}
  {% assign sections_to_render = page.sections %}
{% endunless %}

{% comment %} Store page content for section includes {% endcomment %}
{% capture page_content %}{{ content }}{% endcapture %}

<div class="brands-page">
  {% comment %} Handle breadcrumbs separately outside panel system {% endcomment %}
  {% if sections_to_render contains "breadcrumbs" %}
    <section class="brands-section brands-section--breadcrumbs"
             id="brands-section-breadcrumbs"
             aria-labelledby="heading-breadcrumbs">
      {% include components/ui/breadcrumbs.html %}
    </section>
  {% endif %}
  
  {% comment %} All other sections use panel wrapper logic {% endcomment %}
  {% for section in sections_to_render %}
    {% unless section == "breadcrumbs" %}
      <section class="brands-section brands-section--{{ section }}" id="brands-section-{{ section }}" aria-labelledby="heading-{{ section }}">
        {% comment %} Determine panel type for each section {% endcomment %}
        {% case section %}
          {% when "hero" %}
            {% assign panel_type = "panel--hero" %}
          {% when "impact" %}
            {% assign panel_type = "panel--primary" %}
            {% assign additional_classes = "panel--impact" %}
          {% when "featured-brands" %}
            {% assign panel_type = "panel--amber-soft" %}
          {% when "contact-cta" %}
            {% assign panel_type = "panel--cta" %}
            {% assign content_classes = "panel--centered" %}
          {% else %}
            {% assign panel_type = "panel--light" %}
        {% endcase %}
        
        {% comment %} Use panel wrapper for section rendering {% endcomment %}
        {% if section == "content" %}
          {% include helpers/panel-wrapper.html 
             type=panel_type 
             additional_classes=additional_classes
             content_classes=content_classes
             content_include="pages/brands/content.html" 
             include_params="content=page_content" %}
        {% else %}
          {% assign content_include_path = "pages/brands/" | append: section | append: ".html" %}
          {% include helpers/panel-wrapper.html 
             type=panel_type 
             additional_classes=additional_classes
             content_classes=content_classes
             content_include=content_include_path %}
        {% endif %}
        
        {% comment %} Reset variables for next iteration {% endcomment %}
        {% assign additional_classes = nil %}
        {% assign content_classes = nil %}
      </section>
    {% endunless %}
  {% endfor %}
</div>

<!-- JavaScript for brand filtering and display -->
<script src="{{ '/assets/js/pages/brands/brands-filtering.js' | relative_url }}"></script>
<script src="{{ '/assets/js/components/search-placeholder.js' | relative_url }}"></script>
