---
layout: default
---
<!-- ----------------------------------------------------------------------------
  BRAND DETAIL LAYOUT (REFACTORED)
  ------------------------------------------------------------------------------
  Used for displaying the full profile of an individual brand:

    - /en/brands/ru/teatime/
    - /zh/brands/in/himalaya-herbs/
    - /ru/brands/br/serra-verde/

  Purpose:
  - Renders brand metadata (logo, sector, market, founding year, etc.)
  - Displays founder, product range, and visual gallery (if available)
  - Links to related discovery tags and related insights
  - Shows related brands from the same dataset
  - Fully supports multilingual content using page.lang

  Used by:
  - Files in _brands/

  Dependencies:
  - _includes/pages/brand/* components
  - site.data.translations
  - site.data.dimensions
  - MapLibre for location intelligence
---------------------------------------------------------------------------- -->

<div class="brand-profile">
  {% include pages/brand/header.html brand=page %}
  
  {% include pages/brand/hero.html brand=page %}
  
  <div class="brand-detail">
    <div class="brand-detail__main">
      {% include pages/brand/content.html brand=page content=content %}
    </div>
    
    <div class="brand-detail__sidebar">
      {% include pages/brand/sidebar.html brand=page %}
    </div>
  </div>
  
  {% include pages/brand/timeline.html brand=page %}
  
  {% include pages/brand/certifications.html brand=page %}
  
  {% include pages/brand/international.html brand=page %}
  
  {% include pages/brand/gallery.html brand=page %}
  
  {% include pages/brand/location.html brand=page %}
  
  {% include pages/brand/related-brands.html brand=page %}
</div>

<!-- Initialize map for location intelligence section -->
<script class="brand-map-script">
  document.addEventListener('DOMContentLoaded', function() {
    // Check if map element and coordinates exist
    const mapElement = document.getElementById('brandLocationMap');
    if (mapElement && mapElement.dataset.lat && mapElement.dataset.lng) {
      const lat = parseFloat(mapElement.dataset.lat);
      const lng = parseFloat(mapElement.dataset.lng);
      const brandName = mapElement.dataset.name;
      
      // Initialize map if MapLibre is available 
      if (typeof maplibregl !== 'undefined') {
        const map = new maplibregl.Map({
          container: 'brandLocationMap',
          style: 'https://tiles.stadiamaps.com/styles/alidade_smooth.json?api_key={{ site.stadia_maps_api_key }}',
          center: [lng, lat],
          zoom: 7
        });
        
        // Add navigation controls
        map.addControl(new maplibregl.NavigationControl());
        
        // Add marker for brand location
        new maplibregl.Marker()
          .setLngLat([lng, lat])
          .setPopup(new maplibregl.Popup().setHTML(`<h3>${brandName}</h3>`))
          .addTo(map);
      } else {
        // Fallback if MapLibre is not available
        mapElement.innerHTML = `<div class="map-placeholder">
          <p>Map showing ${brandName} at coordinates ${lat}, ${lng}</p>
          <p>Interactive map loading...</p>
        </div>`;
      }
    }
  });
</script>